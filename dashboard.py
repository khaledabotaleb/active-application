# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'ui\dashboard.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets,uic
from PyQt5.QtSql import QSqlDatabase
import psycopg2

class Dashboard(QtWidgets.QMainWindow):
     def __init__(self):
        super().__init__()
        uic.loadUi("ui/dashboard.ui", self)

        self.tableWidget.setEditTriggers(QtWidgets.QTableWidget.NoEditTriggers)
        self.refresh_table()

        # add button
        self.addbutton = self.findChild(QPushButton, 'addrecord')
        self.addbutton.clicked.connect(self.add_record)

        # add action
        self.addaction = self.findChild(QAction)
        self.addaction.triggered.connect(self.add_record)

        # refresh button
        self.refresh = self.findChild(QPushButton, "refresh")
        self.refresh.clicked.connect(self.refresh_table)

        # refresh action
        self.refreshaction = self.findChild(QAction, "actionRefresh")
        self.refreshaction.triggered.connect(self.refresh_table)

        # edit button
        self.editbtn = self.findChild(QPushButton, "edit")
        self.editbtn.clicked.connect(self.edit_work)

        # search and filter field
        self.filterField = self.findChild(QLineEdit, "searchField")
        self.filterField.textChanged.connect(self.filter)

        # filter flag
        self.filterFlag = self.findChild(QComboBox, "filterFlag")

        # delete button
        self.deleteButton = self.findChild(QPushButton, "deleteButton")
        self.deleteButton.clicked.connect(self.delete_clicked)

        # view button
        self.viewButton = self.findChild(QPushButton, "viewButton")
        self.viewButton.clicked.connect(self.view_clicked)

        # print button
        self.viewButton = self.findChild(QPushButton, "printButton")
        self.viewButton.clicked.connect(self.print_clicked)
#     def setupUi(self, MainWindow):
#         MainWindow.setObjectName("MainWindow")
#         MainWindow.resize(649, 504)
#         self.centralwidget = QtWidgets.QWidget(MainWindow)
#         self.centralwidget.setObjectName("centralwidget")
#         self.verticalLayout = QtWidgets.QVBoxLayout(self.centralwidget)
#         self.verticalLayout.setObjectName("verticalLayout")
#         self.horizontalLayout = QtWidgets.QHBoxLayout()
#         self.horizontalLayout.setObjectName("horizontalLayout")
#         self.label_5 = QtWidgets.QLabel(self.centralwidget)
#         self.label_5.setText("")
#         self.label_5.setObjectName("label_5")
#         self.horizontalLayout.addWidget(self.label_5)
#         self.addrecord = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.addrecord.setFont(font)
#         self.addrecord.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.addrecord.setText("")
#         icon = QtGui.QIcon()
#         icon.addPixmap(QtGui.QPixmap("ui\\icons/005-add.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.addrecord.setIcon(icon)
#         self.addrecord.setIconSize(QtCore.QSize(28, 28))
#         self.addrecord.setObjectName("addrecord")
#         self.horizontalLayout.addWidget(self.addrecord)
#         self.viewButton = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.viewButton.setFont(font)
#         self.viewButton.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.viewButton.setText("")
#         icon1 = QtGui.QIcon()
#         icon1.addPixmap(QtGui.QPixmap("ui\\icons/eye.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.viewButton.setIcon(icon1)
#         self.viewButton.setIconSize(QtCore.QSize(28, 28))
#         self.viewButton.setObjectName("viewButton")
#         self.horizontalLayout.addWidget(self.viewButton)
#         self.edit = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.edit.setFont(font)
#         self.edit.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.edit.setText("")
#         icon2 = QtGui.QIcon()
#         icon2.addPixmap(QtGui.QPixmap("ui\\icons/edit.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.edit.setIcon(icon2)
#         self.edit.setIconSize(QtCore.QSize(28, 28))
#         self.edit.setObjectName("edit")
#         self.horizontalLayout.addWidget(self.edit)
#         self.deleteButton = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.deleteButton.setFont(font)
#         self.deleteButton.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.deleteButton.setText("")
#         icon3 = QtGui.QIcon()
#         icon3.addPixmap(QtGui.QPixmap("ui\\icons/delete.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.deleteButton.setIcon(icon3)
#         self.deleteButton.setIconSize(QtCore.QSize(28, 28))
#         self.deleteButton.setObjectName("deleteButton")
#         self.horizontalLayout.addWidget(self.deleteButton)
#         self.printButton = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.printButton.setFont(font)
#         self.printButton.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.printButton.setText("")
#         icon4 = QtGui.QIcon()
#         icon4.addPixmap(QtGui.QPixmap("ui\\icons/printer(1).png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.printButton.setIcon(icon4)
#         self.printButton.setIconSize(QtCore.QSize(28, 28))
#         self.printButton.setObjectName("printButton")
#         self.horizontalLayout.addWidget(self.printButton)
#         self.refresh = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.refresh.setFont(font)
#         self.refresh.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.refresh.setText("")
#         icon5 = QtGui.QIcon()
#         icon5.addPixmap(QtGui.QPixmap("ui\\icons/004-refresh-2.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.refresh.setIcon(icon5)
#         self.refresh.setIconSize(QtCore.QSize(28, 28))
#         self.refresh.setObjectName("refresh")
#         self.horizontalLayout.addWidget(self.refresh)
#         self.pushButton_3 = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.pushButton_3.setFont(font)
#         self.pushButton_3.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.pushButton_3.setText("")
#         icon6 = QtGui.QIcon()
#         icon6.addPixmap(QtGui.QPixmap("ui\\icons/Bar-chart-icon.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.pushButton_3.setIcon(icon6)
#         self.pushButton_3.setIconSize(QtCore.QSize(28, 28))
#         self.pushButton_3.setObjectName("pushButton_3")
#         self.horizontalLayout.addWidget(self.pushButton_3)
#         self.pushButton = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.pushButton.setFont(font)
#         self.pushButton.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.pushButton.setText("")
#         icon7 = QtGui.QIcon()
#         icon7.addPixmap(QtGui.QPixmap("ui\\icons/settings.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.pushButton.setIcon(icon7)
#         self.pushButton.setIconSize(QtCore.QSize(28, 28))
#         self.pushButton.setObjectName("pushButton")
#         self.horizontalLayout.addWidget(self.pushButton)
#         spacerItem = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Minimum)
#         self.horizontalLayout.addItem(spacerItem)
#         self.pushButton_2 = QtWidgets.QPushButton(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(15)
#         self.pushButton_2.setFont(font)
#         self.pushButton_2.setStyleSheet("QPushButton {\n"
# "    padding : 10px 10px 10px 10px;\n"
# "}")
#         self.pushButton_2.setText("")
#         icon8 = QtGui.QIcon()
#         icon8.addPixmap(QtGui.QPixmap("ui\\icons/account.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.pushButton_2.setIcon(icon8)
#         self.pushButton_2.setIconSize(QtCore.QSize(28, 28))
#         self.pushButton_2.setObjectName("pushButton_2")
#         self.horizontalLayout.addWidget(self.pushButton_2)
#         self.label_6 = QtWidgets.QLabel(self.centralwidget)
#         self.label_6.setText("")
#         self.label_6.setObjectName("label_6")
#         self.horizontalLayout.addWidget(self.label_6)
#         self.verticalLayout.addLayout(self.horizontalLayout)
#         self.horizontalLayout_2 = QtWidgets.QHBoxLayout()
#         self.horizontalLayout_2.setObjectName("horizontalLayout_2")
#         self.label_3 = QtWidgets.QLabel(self.centralwidget)
#         self.label_3.setText("")
#         self.label_3.setObjectName("label_3")
#         self.horizontalLayout_2.addWidget(self.label_3)
#         self.label = QtWidgets.QLabel(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(14)
#         font.setBold(False)
#         font.setWeight(50)
#         self.label.setFont(font)
#         self.label.setObjectName("label")
#         self.horizontalLayout_2.addWidget(self.label)
#         self.filterFlag = QtWidgets.QComboBox(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(14)
#         self.filterFlag.setFont(font)
#         self.filterFlag.setObjectName("filterFlag")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.filterFlag.addItem("")
#         self.horizontalLayout_2.addWidget(self.filterFlag)
#         self.label_2 = QtWidgets.QLabel(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(14)
#         font.setBold(False)
#         font.setWeight(50)
#         self.label_2.setFont(font)
#         self.label_2.setObjectName("label_2")
#         self.horizontalLayout_2.addWidget(self.label_2)
#         self.searchField = QtWidgets.QLineEdit(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(14)
#         self.searchField.setFont(font)
#         self.searchField.setObjectName("searchField")
#         self.horizontalLayout_2.addWidget(self.searchField)
#         self.label_4 = QtWidgets.QLabel(self.centralwidget)
#         self.label_4.setText("")
#         self.label_4.setObjectName("label_4")
#         self.horizontalLayout_2.addWidget(self.label_4)
#         self.verticalLayout.addLayout(self.horizontalLayout_2)
#         self.tableWidget = QtWidgets.QTableWidget(self.centralwidget)
#         font = QtGui.QFont()
#         font.setPointSize(11)
#         self.tableWidget.setFont(font)
#         self.tableWidget.setStyleSheet("QHeaderView::section{\n"
# "text-align:center;\n"
# "background:#CDCDCD;\n"
# "padding:1px;\n"
# "margin:0px;\n"
# "color:#000;\n"
# "border:1px solid #BABABA;\n"
# "border-left-width:0;\n"
# "font-size: 11pt;\n"
# "}")
#         self.tableWidget.setObjectName("tableWidget")
#         self.tableWidget.setColumnCount(5)
#         self.tableWidget.setRowCount(0)
#         item = QtWidgets.QTableWidgetItem()
#         self.tableWidget.setHorizontalHeaderItem(0, item)
#         item = QtWidgets.QTableWidgetItem()
#         self.tableWidget.setHorizontalHeaderItem(1, item)
#         item = QtWidgets.QTableWidgetItem()
#         self.tableWidget.setHorizontalHeaderItem(2, item)
#         item = QtWidgets.QTableWidgetItem()
#         self.tableWidget.setHorizontalHeaderItem(3, item)
#         item = QtWidgets.QTableWidgetItem()
#         self.tableWidget.setHorizontalHeaderItem(4, item)
#         self.verticalLayout.addWidget(self.tableWidget)
#         MainWindow.setCentralWidget(self.centralwidget)
#         self.menubar = QtWidgets.QMenuBar(MainWindow)
#         self.menubar.setGeometry(QtCore.QRect(0, 0, 649, 26))
#         self.menubar.setObjectName("menubar")
#         self.menuFile = QtWidgets.QMenu(self.menubar)
#         self.menuFile.setObjectName("menuFile")
#         self.menuCode = QtWidgets.QMenu(self.menubar)
#         self.menuCode.setObjectName("menuCode")
#         self.menuHelp = QtWidgets.QMenu(self.menubar)
#         self.menuHelp.setObjectName("menuHelp")
#         self.menuLog_Out = QtWidgets.QMenu(self.menubar)
#         self.menuLog_Out.setObjectName("menuLog_Out")
#         MainWindow.setMenuBar(self.menubar)
#         self.statusbar = QtWidgets.QStatusBar(MainWindow)
#         self.statusbar.setObjectName("statusbar")
#         MainWindow.setStatusBar(self.statusbar)
#         self.addrecordmenu = QtWidgets.QAction(MainWindow)
#         self.addrecordmenu.setIcon(icon)
#         self.addrecordmenu.setObjectName("addrecordmenu")
#         self.actionRefresh = QtWidgets.QAction(MainWindow)
#         self.actionRefresh.setIcon(icon)
#         self.actionRefresh.setObjectName("actionRefresh")
#         self.actionFind_Entry = QtWidgets.QAction(MainWindow)
#         icon9 = QtGui.QIcon()
#         icon9.addPixmap(QtGui.QPixmap("ui\\icons/icons8-appointment-50.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.actionFind_Entry.setIcon(icon9)
#         self.actionFind_Entry.setObjectName("actionFind_Entry")
#         self.actionSettings = QtWidgets.QAction(MainWindow)
#         icon10 = QtGui.QIcon()
#         icon10.addPixmap(QtGui.QPixmap("ui\\icons/icons8-nurse-male-48.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.actionSettings.setIcon(icon10)
#         self.actionSettings.setObjectName("actionSettings")
#         self.actionExit = QtWidgets.QAction(MainWindow)
#         icon11 = QtGui.QIcon()
#         icon11.addPixmap(QtGui.QPixmap("ui\\icons/close.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.actionExit.setIcon(icon11)
#         self.actionExit.setObjectName("actionExit")
#         self.actionGithub_com = QtWidgets.QAction(MainWindow)
#         icon12 = QtGui.QIcon()
#         icon12.addPixmap(QtGui.QPixmap("ui\\icons/github-icon-png-71-64x64.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.actionGithub_com.setIcon(icon12)
#         self.actionGithub_com.setObjectName("actionGithub_com")
#         self.actionHelp = QtWidgets.QAction(MainWindow)
#         icon13 = QtGui.QIcon()
#         icon13.addPixmap(QtGui.QPixmap("ui\\icons/question.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.actionHelp.setIcon(icon13)
#         self.actionHelp.setObjectName("actionHelp")
#         self.actionRemove_Account = QtWidgets.QAction(MainWindow)
#         icon14 = QtGui.QIcon()
#         icon14.addPixmap(QtGui.QPixmap("ui\\icons/Logout_37127.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
#         self.actionRemove_Account.setIcon(icon14)
#         self.actionRemove_Account.setObjectName("actionRemove_Account")
#         self.menuFile.addAction(self.addrecordmenu)
#         self.menuFile.addAction(self.actionRefresh)
#         self.menuFile.addAction(self.actionFind_Entry)
#         self.menuFile.addAction(self.actionSettings)
#         self.menuFile.addSeparator()
#         self.menuFile.addAction(self.actionExit)
#         self.menuCode.addAction(self.actionGithub_com)
#         self.menuHelp.addAction(self.actionHelp)
#         self.menuLog_Out.addAction(self.actionRemove_Account)
#         self.menubar.addAction(self.menuFile.menuAction())
#         self.menubar.addAction(self.menuCode.menuAction())
#         self.menubar.addAction(self.menuHelp.menuAction())
#         self.menubar.addAction(self.menuLog_Out.menuAction())

#         self.retranslateUi(MainWindow)
#         QtCore.QMetaObject.connectSlotsByName(MainWindow)

#     def retranslateUi(self, MainWindow):
#         _translate = QtCore.QCoreApplication.translate
#         MainWindow.setWindowTitle(_translate("MainWindow", "Active Magagement System"))
#         self.label.setText(_translate("MainWindow", "Search By:"))
#         self.filterFlag.setItemText(0, _translate("MainWindow", "ID"))
#         self.filterFlag.setItemText(1, _translate("MainWindow", "Name"))
#         self.filterFlag.setItemText(2, _translate("MainWindow", "Sex"))
#         self.filterFlag.setItemText(3, _translate("MainWindow", "Age"))
#         self.filterFlag.setItemText(4, _translate("MainWindow", "Address"))
#         self.filterFlag.setItemText(5, _translate("MainWindow", "CC"))
#         self.filterFlag.setItemText(6, _translate("MainWindow", "OE"))
#         self.filterFlag.setItemText(7, _translate("MainWindow", "RF"))
#         self.filterFlag.setItemText(8, _translate("MainWindow", "Path"))
#         self.filterFlag.setItemText(9, _translate("MainWindow", "Dxs."))
#         self.filterFlag.setItemText(10, _translate("MainWindow", "Comments"))
#         self.label_2.setText(_translate("MainWindow", "What to search:"))
#         item = self.tableWidget.horizontalHeaderItem(0)
#         item.setText(_translate("MainWindow", "ID"))
#         item = self.tableWidget.horizontalHeaderItem(1)
#         item.setText(_translate("MainWindow", "Name"))
#         item = self.tableWidget.horizontalHeaderItem(2)
#         item.setText(_translate("MainWindow", "Age"))
#         item = self.tableWidget.horizontalHeaderItem(3)
#         item.setText(_translate("MainWindow", "Gender"))
#         item = self.tableWidget.horizontalHeaderItem(4)
#         item.setText(_translate("MainWindow", "Mobile"))
#         self.menuFile.setTitle(_translate("MainWindow", "File"))
#         self.menuCode.setTitle(_translate("MainWindow", "Code"))
#         self.menuHelp.setTitle(_translate("MainWindow", "Help"))
#         self.menuLog_Out.setTitle(_translate("MainWindow", "Log Out"))
#         self.addrecordmenu.setText(_translate("MainWindow", "Patient"))
#         self.addrecordmenu.setShortcut(_translate("MainWindow", "Ctrl+A"))
#         self.actionRefresh.setText(_translate("MainWindow", "Add Appointment"))
#         self.actionRefresh.setShortcut(_translate("MainWindow", "Ctrl+R"))
#         self.actionFind_Entry.setText(_translate("MainWindow", "Available Time"))
#         self.actionFind_Entry.setShortcut(_translate("MainWindow", "Ctrl+Q"))
#         self.actionSettings.setText(_translate("MainWindow", "Staff"))
#         self.actionExit.setText(_translate("MainWindow", "Exit"))
#         self.actionGithub_com.setText(_translate("MainWindow", "Github.com"))
#         self.actionHelp.setText(_translate("MainWindow", "Help"))
#         self.actionRemove_Account.setText(_translate("MainWindow", "Remove Account"))

#     def location_on_the_screen(self):
#         qr = self.frameGeometry()
#         cp = QDesktopWidget().availableGeometry().center()
#         qr.moveCenter(cp)
#         self.move(qr.topLeft())
     def refresh_table(self):
        # datapath = jsondata()
        # database = datapath.getdatapath() + "/database.db"
        conn = QSqlDatabase.addDatabase("QPSQL")
        conn = sqlite3.connect(database)
        sql = "SELECT * FROM entry"
        cur = conn.cursor()
        result = cur.execute(sql)
        no_row = len(result.fetchall())

        self.tableWidget.setRowCount(no_row)
        rowindex = 0
        for row in cur.execute(sql):
            self.tableWidget.setItem(rowindex, 0, QtWidgets.QTableWidgetItem(row[1]))
            self.tableWidget.setItem(rowindex, 1, QtWidgets.QTableWidgetItem(row[2]))
            self.tableWidget.setItem(rowindex, 2, QtWidgets.QTableWidgetItem(row[3]))
            self.tableWidget.setItem(rowindex, 3, QtWidgets.QTableWidgetItem(row[4]))
            self.tableWidget.setItem(rowindex, 4, QtWidgets.QTableWidgetItem(row[5]))
            self.tableWidget.setItem(rowindex, 5, QtWidgets.QTableWidgetItem(row[6]))
            self.tableWidget.setItem(rowindex, 6, QtWidgets.QTableWidgetItem(row[7]))
            self.tableWidget.setItem(rowindex, 7, QtWidgets.QTableWidgetItem(row[8]))
            self.tableWidget.setItem(rowindex, 8, QtWidgets.QTableWidgetItem(row[9]))
            self.tableWidget.setItem(rowindex, 9, QtWidgets.QTableWidgetItem(row[10]))
            self.tableWidget.setItem(rowindex, 10, QtWidgets.QTableWidgetItem(row[13]))
            self.tableWidget.setItem(rowindex, 11, QtWidgets.QTableWidgetItem(row[11]))
            self.tableWidget.setItem(rowindex, 12, QtWidgets.QTableWidgetItem(row[12]))
            self.tableWidget.setItem(rowindex, 13, QtWidgets.QTableWidgetItem(row[14]))
            self.tableWidget.setItem(rowindex, 14, QtWidgets.QTableWidgetItem(row[15]))
            self.tableWidget.setItem(rowindex, 15, QtWidgets.QTableWidgetItem(row[16]))
            rowindex = rowindex + 1

        conn.commit()
        conn.close()